<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Securial::Auth::SessionCreator
  
    &mdash; Securial Gem Documentation
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Securial::Auth::SessionCreator";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Securial.html" title="Securial (module)">Securial</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Auth.html" title="Securial::Auth (module)">Auth</a></span></span>
     &raquo; 
    <span class="title">SessionCreator</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Securial::Auth::SessionCreator
  
  
  
</h1>
<div class="box_info">
  

  
  
  <dl>
      <dt>Extended by:</dt>
      <dd><span class='object_link'><a href="" title="Securial::Auth::SessionCreator (module)">SessionCreator</a></span></dd>
  </dl>
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="" title="Securial::Auth::SessionCreator (module)">SessionCreator</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/securial/auth/session_creator.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Creates and manages user authentication sessions.</p>

<p>This module provides methods to create new authenticated sessions for users, including proper validation of inputs, generation of refresh tokens, and setting up session metadata such as IP addresses and user agents.</p>

<p>Created sessions are automatically set as the current session context and include all necessary tokens and expiration information for secure authentication management.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_session!-instance_method" title="#create_session! (instance method)">#<strong>create_session!</strong>(user, request)  &#x21d2; Securial::Session<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new authenticated session for the given user and request.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_session!-instance_method">
  
    #<strong>create_session!</strong>(user, request)  &#x21d2; <tt><span class='object_link'><a href="../Session.html" title="Securial::Session (class)">Securial::Session</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new authenticated session for the given user and request.</p>

<p>Validates the provided user and request objects, then creates a new session record with appropriate metadata and tokens. The newly created session is automatically set as the current session context.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Creating a session after successful authentication</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Securial.html" title="Securial (module)">Securial</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../User.html" title="Securial::User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_authenticate'>authenticate</span><span class='lparen'>(</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span>
  <span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Securial::Auth::SessionCreator (module)">SessionCreator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_session!'>create_session!</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>
  <span class='comment'># User is now authenticated with active session
</span><span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Handling validation failures</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Invalid user (not persisted)
</span><span class='id identifier rubyid_new_user'>new_user</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Securial.html" title="Securial (module)">Securial</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../User.html" title="Securial::User (class)">User</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Securial::Auth::SessionCreator (module)">SessionCreator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_session!'>create_session!</span><span class='lparen'>(</span><span class='id identifier rubyid_new_user'>new_user</span><span class='comma'>,</span> <span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>
<span class='comment'># =&gt; nil</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="Securial::User (class)">Securial::User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The user object to create a session for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt>ActionDispatch::Request</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The HTTP request object containing metadata</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Session.html" title="Securial::Session (class)">Securial::Session</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The created session object, or nil if validation fails</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/securial/auth/session_creator.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_session!'>create_session!</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_request'>request</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_valid_user'>valid_user</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Securial.html" title="Securial (module)">Securial</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../User.html" title="Securial::User (class)">User</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_persisted?'>persisted?</span>
  <span class='id identifier rubyid_valid_request'>valid_request</span> <span class='op'>=</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>ActionDispatch</span><span class='op'>::</span><span class='const'>Request</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid_user'>valid_user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_valid_request'>valid_request</span>

  <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_sessions'>sessions</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span>
    <span class='label'>user_agent:</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_user_agent'>user_agent</span><span class='comma'>,</span>
    <span class='label'>ip_address:</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_remote_ip'>remote_ip</span><span class='comma'>,</span>
    <span class='label'>refresh_token:</span> <span class='const'><span class='object_link'><a href="../../Securial.html" title="Securial (module)">Securial</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Auth.html" title="Securial::Auth (module)">Auth</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="TokenGenerator.html" title="Securial::Auth::TokenGenerator (module)">TokenGenerator</a></span></span><span class='period'>.</span><span class='id identifier rubyid_generate_refresh_token'><span class='object_link'><a href="TokenGenerator.html#generate_refresh_token-instance_method" title="Securial::Auth::TokenGenerator#generate_refresh_token (method)">generate_refresh_token</a></span></span><span class='comma'>,</span>
    <span class='label'>last_refreshed_at:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span>
    <span class='label'>refresh_token_expires_at:</span> <span class='int'>1</span><span class='period'>.</span><span class='id identifier rubyid_week'>week</span><span class='period'>.</span><span class='id identifier rubyid_from_now'>from_now</span><span class='comma'>,</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_session'>session</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../Current.html" title="Securial::Current (class)">Current</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Sep 16 10:56:18 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.4).
</div>

    </div>
  </body>
</html>